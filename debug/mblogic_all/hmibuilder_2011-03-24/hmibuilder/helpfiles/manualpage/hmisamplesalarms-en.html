<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" 
	"http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >

	<title>Help - HMI - HMI Alarms, Events, and Errors</title>
<link rel="icon" type="image/png" href="/systemicon.png">
<!-- General page layout style sheet. -->
<link rel="stylesheet" href="/helppagelayout.css" type="text/css">
</head>

<body>
<div id="filler">

	<div id="header">
		<p class="headlogo">
			<img src="/systemlogo.png" width="200" alt="MB Logic Logo"/>
			<span class="headtitle1">MBLogic </span>
			<span class="headtitle2"> for an open world in automation</span>
		</p>
	</div>



	<!-- This is the standard nav bar. -->
	<div id="nav">
		<ul>
			<li><a href="/index.html">Home</a></li>
			<li><a href="/svgedit/svgedit.html">Edit SVG</a></li>
			<li><a href="/svglib/svglib.html">SVG Library</a></li>
			<li><a href="/svglibedit/svglibedit.html">Inkscape</a></li>
			<li><a href="/hmitemplates/hmitemplates.html">Templates</a></li>
			<li><a href="/hmibuilder/hmibuilder.html">Assemble Page</a></li>
		</ul>
	</div>


<hr>

	<!-- This is the help system nav bar. -->
	<div id="helpnav">
		<h2>Help Topics</h2>
		<ul>
			<li><a href="/index.html">Home</a></li>
			<li><a href="/svgedit/svgedit.html">Editing SVG with Inkscape</a></li>
			<li><a href="/svglib/svglib.html">SVG Library</a></li>
			<li><a href="/svglibedit/svglibedit.html">Using the SVG Library with Inkscape</a></li>
			<li><a href="/customwidgets/customwidgets.html">Custom Widgets</a></li>
			<li><a href="/hmitemplates/hmitemplates.html">HMI web templates</a></li>
			<li><a href="/hmibuilder/hmibuilder.html">Assembling web pages</a></li>
			<li><a href="/hmilib/hmilib.html">HMI Javascript Client Libraries</a></li>
			<li><a href="/basicconcepts/basicconcepts.html">Basic Concepts</a></li>
			<li><a href="/manualpage/manualpage.html">Manual HMI Web Page Construction</a></li>
		</ul>

		<h3>Manual HMI Web Page Construction</h3>
		<ul>
			<li><a href="/manualpage/hmisampleslayout-en.html">Page Layout</a></li>
			<li><a href="/manualpage/hmisamplespositioning-en.html">
				Positioning Components on the Screen</a></li>
			<li><a href="/manualpage/hmisamplescomms-en.html">
				Communications, the Display List and Data Sources</a></li>
			<li><a href="/manualpage/hmisamplesmenus-en.html">Menu Control</a></li>
			<li><a href="/manualpage/hmisamplesalarms-en.html">
				Events, Alarms, and System Status</a></li>
			<li><a href="/manualpage/hmisamplesxul-en.html">
				Mixing HTML and XUL with SVG</a></li>
			<li><a href="/manualpage/hmisamplespushbuttons-en.html">Push Buttons</a></li>
			<li><a href="/manualpage/hmisamplespilotlights-en.html">Pilot Lights</a></li>
			<li><a href="/manualpage/hmisamplesnumerictext-en.html">
				Numeric and Text Displays</a></li>
			<li><a href="/manualpage/hmisamplesgauges-en.html">Tanks and Gauges</a></li>
			<li><a href="/manualpage/hmisamplespipes-en.html">Piping and Pumps</a></li>
			<li><a href="/manualpage/hmisamplesnumbinput-en.html">Numeric Inputs</a></li>
			<li><a href="/manualpage/hmisamplesstripchart-en.html">Strip Charts</a></li>
			<li><a href="/manualpage/hmisamplesbackground-en.html">Background Images</a></li>
		 	<li><a href="/manualpage/hmisamplesvisualeffects-en.html">Visual Effects</a></li>
		</ul>

	</div>



	<!-- Put main content here -->
	<div id="datadisplay">

<h1>Help - HMI Alarms, Events, and Errors</h1>

<hr>

<h2>Overview:</h2>

<p>The HMI can display alarms, events, and communications errors. The alarms,
events, and errors are generated by the HMI server by monitoring the alarm and
event tag data based on the system configuration. 
</p>


<hr>

<h2>Alarms:</h2>
<p>
<img src="mindemoalarms.png" width="526" height="394" alt="Alarms">
</p>

<p>Alarms are messages which indicate that a fault condition is present. The 
alarm message will remain visible until the message has been acknowledged by 
the operator and the input representing the fault has been reset.  
</p>


<h3>Alarms:</h3>

<p>Alarms exist in the following states:
</p>

<ul>
	<li>Inactive - The condition being monitored does not have any faults 
		present, and there is no associated alarm message waiting to be 
		acknowledged. </li>
	<li>Active - A fault condition is present and the alarm message has not
		been acknowledged by the operator.</li>
	<li>Acknowledged - The fault condition is present, and the operator has
		acknowedged the alarm message.</li>
	<li>OK - The fault condition is no longer present, but the operator has not
		acknowledged the alarm message yet.</li>
</ul>

<p>Only alarms in the "active", "acknowledged", or "OK" states will be 
displayed. There will be no messages visible in the alarm table for 
"inactive" alarms.
</p>

<p>An alarm message represents the current state of the fault. This state is
updated on each poll. Alarms are detected by the HMI server by monitoring a 
boolean value which is defined in the configuration. When that boolean value
is true, a fault is considered to be present. If the boolean value is false,
the fault is considered to be no longer present.  
</p>

<p>Each alarm message is associated with one monitored value. This means that
there cannot be more alarm messages present than there are monitored fault 
conditions. That is, if the alarm configuration has defined 10 fault 
conditions to monitor, there will not be more than 10 alarm messages 
displayed on the alarm screen.  
</p>

<p>Each alarm message will contain the following information:
</p>

<ul>
	<li>The alarm text. This is a description of the alarm. The text
		for this is provided by the user. </li>
	<li>The alarm state. This describes the current state of the alarm (e.g. 
		"inactive", "active", "acknowledged", etc.). The text for this is 
		provided by the user and does not have to match the names used
		in this documentation. </li>
	<li>The time. This is the time stamp applied by the server at the
		time when the alarm was detected. The time stamp is applied by
		the server, but the time displayed is determined by the locale
		setting on the web browser. </li>
	<li>Time OK. This is the time at which the fault condition became
		OK. </li>
	<li>Count. This is the number of times the fault condition has appeared
		(the monitored value has changed from false to true) during the time
		this alarm message has been displayed. Once the alarm has disappeared
		from the screen, this count is reset. </li>
</ul>


<p>Alarm messages are colour coded according to their current state. The 
colours used are configured by passing appropriate parameters to the
alarm library Javascript object when it is initialised.  
</p>

<h3>Acknowledging Alarms:</h3>

<p>"Acknowledging" an alarm means that the operator has taken an action to
indicate that he has seen the alarm messages. The alarm is acknowledged when 
an HMI client (web browser) sends an alarm acknowledge message to the HMI 
server. The server will add this acknowledge request to the current state
of the alarm message, and the new state will be reflected in the reply from
the server to the HMI client. The client does <em>not</em> change the alarm 
display table based on the acknowledge. It waits for the actual change in the
alarm state in the normal response from the server. 
</p>

<p>An alarm acknowledge request is normally triggered by the operator
activating (clicking on) a button or other similar control. The means used
for this is determined by the HMI application (web page) programmer.  
</p>

<p>When the client sends an alarm acknowledge request to the server, it
requests that <em>all</em> the outstanding alarms be acknowledged. The
operator does not acknowledge each alarm individually. 
</p>

<h3>Alarm History:</h3>

<p>When an alarm message has changed from the active to inactive state, a copy
of the message is added to the alarm history. The alarm history is a sequential
record of alarms. Each time an alarm becomes inactive, a copy of the message
is added to the history. This means that the same alarm message may appear 
multiple times in the alarm history display table.   
</p>

<p>Alarm history messages are saved by the server in an "alarm history buffer".
When the HMI client starts up, it requests all outstanding alarm history 
messages (up to a maximum). Subsequent to this, the HMI client will ask only 
for any new messages that it does not already have. This is controlled 
automatically by the communications library.   
</p>

<p>When a new alarm history message is received, it is added to the top
of the alarm history table. The table has a fixed maximum size. When the
table reaches this maximum size, older messages are discarded. 
</p>

<p>Because the alarm history messages are stored in the server, they are not
lost when the web browser is restarted or when the page is reloaded.
</p>

<p>Each alarm history message includes the following information:
</p>

<ul>
	<li>The alarm text. This is the description of the alarm found in the original
		alarm message. </li>
	<li>The alarm time. This is the time as which the alarm originally became 
		active.</li>
	<li>Time OK. This is the time at which the fault condition became OK</li>
	<li>Ack by. This is ID string of the client which acknowledged the alarm. 
		The client ID string is set in the client communications configuration. </li>
</ul>



<h3>HTML</h3>

<pre class="examples">

	&lt;h2&gt;Active Alarms:&lt;/h2&gt; 

	&lt;p&gt;  
	&lt;svg xmlns="http://www.w3.org/2000/svg" 
 	    xmlns:html="http://www.w3.org/1999/xhtml" width="250px" height="75"&gt;


	&lt;defs&gt;
		&lt;!-- The following filter is used to add a drop shadown. --&gt;
		&lt;filter id="AlarmDropShadowFilter"&gt;
			&lt;feGaussianBlur stdDeviation="2"&gt;
			&lt;/feGaussianBlur&gt;
		&lt;/filter&gt;

			&lt;!-- For violet buttons. --&gt;
		&lt;linearGradient id="AlarmGradient" x1="1" y1="1" x2="0" y2="0"&gt;
			&lt;stop offset="50%" stop-color="violet" /&gt;
			&lt;stop offset="100%" stop-color="white" /&gt;
		&lt;/linearGradient&gt;

		&lt;!-- Rectangular push button. --&gt;
		&lt;g id="MB_AlarmPB"&gt;
				&lt;!-- This rectangle is used for the drop shadown. --&gt;
				&lt;rect x="-73" y="-18" width="160" height="50" rx="15"
					fill="grey" stroke="none" stroke-width="0px" 
					filter="url(#AlarmDropShadowFilter)"/&gt;
		
				&lt;!-- This is the actual button. --&gt;
				&lt;rect x="-80" y="-25" width="160" height="50" rx="15"/&gt;
		&lt;/g&gt;

	&lt;/defs&gt;


			&lt;!-- Push button to acknowledge alarms. --&gt;
	&lt;g transform="translate(100, 35)" fill="url(#AlarmGradient)"
			class="buttonactivate" onclick="MBHMIProtocol.AddAlarmAck();"&gt;

 			&lt;!-- This is the actual button. --&gt;
			&lt;use xlink:href="#MB_AlarmPB" /&gt;
 			&lt;!-- This is the text label. --&gt;
			&lt;text x="-65" y="8" font-size="20" stroke-width="2px"&gt;Acknowledge&lt;/text&gt; 

	&lt;/g&gt;
		

	&lt;/svg&gt;
	&lt;/p&gt; 

	&lt;p&gt;
	 	&lt;!-- This is the table used to display the alarms. --&gt;
		&lt;table id="AlarmDisplay" border="5" cellpadding="5"&gt;
		&lt;tr&gt; 
			&lt;td&gt;&lt;b&gt;Alarm:&lt;/b&gt;&lt;/td&gt;
			&lt;td&gt;&lt;b&gt;Alarm State:&lt;/b&gt;&lt;/td&gt;
			&lt;td&gt;&lt;b&gt;Time:&lt;/b&gt;&lt;/td&gt; 
			&lt;td&gt;&lt;b&gt;Time OK:&lt;/b&gt;&lt;/td&gt; 
			&lt;td&gt;&lt;b&gt;Count:&lt;/b&gt;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/p&gt;


	&lt;h2&gt;Alarm History:&lt;/h2&gt;

	&lt;!-- This is the table used to display the alarm history. --&gt;
	&lt;p&gt;
		&lt;table id="AlarmHistoryDisplay" border="5" cellpadding="5"&gt;
		&lt;tr&gt;
			&lt;td&gt;&lt;b&gt;Alarm:&lt;/b&gt;&lt;/td&gt;
			&lt;td&gt;&lt;b&gt;Alarm Time:&lt;/b&gt;&lt;/td&gt; 
			&lt;td&gt;&lt;b&gt;Time OK:&lt;/b&gt;&lt;/td&gt; 
			&lt;td&gt;&lt;b&gt;Ack By:&lt;/b&gt;&lt;/td&gt; 
		&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/p&gt;

</pre>


<h3>Javascript:</h3>

<pre class="examples">

	// This is to display the alarms.
	var AlarmDisplay = new MB_AlarmDisplay(document, "AlarmDisplay", 
		alarm_text, alarmstates_text, "red", "orange", "green");
	// Add this to the display list.
	MBHMIProtocol.AddToDisplayList(AlarmDisplay, "alarms", "alarms");


	// This is to display the alarm history.
	var AlarmHistoryDisplay = new MB_AlarmHistoryDisplay(document, 
		"AlarmHistoryDisplay", 50, alarm_text);
	// Add this to the display list.
	MBHMIProtocol.AddToDisplayList(AlarmHistoryDisplay, "alarmhistory", "alarmhistory");

</pre>


<h3>Javascript Library Functions:</h3>

<p>The following Javascript library functions are useful for this feature:
</p>

<ul>
	<li>MB_AlarmDisplay</li>
	<li>MB_AlarmHistoryDisplay</li>
	<li>MBHMIProtocol.AddAlarmAck</li>
</ul>

<h3>Alarm Message Texts:</h3>

<p>Alarm messages indentify the particular alarms via "alarm tags". The actual
texts for the messages is not sent with the message. Instead, the alarm and 
alarm history objects must be initialised with a data structure associating 
the alarm tag with the text to be displayed. This data structure is in the
form of a standard Javascript "object literal". The format for this is shown 
below. For example "PB1Alarm" is an alarm tag, and "PB1 was pressed." is the 
actual text that will be displayed. The alarm tag must match the names used 
in the server configuration file.  
</p>

<pre class="examples">

	alarm_text = {
	"PB1Alarm" : "PB1 was pressed.",
	"PB2Alarm" : "PB2 was pressed.",
	"PB3Alarm" : "PB3 was pressed.",
	"PB4Alarm" : "PB4 was pressed."
	}

</pre>


<h3>How it works:</h3>

<p>The alarm and alarm history display is implemented by creating HTML tables 
and then updating their data using Javascript. In the above examples, only the
table headings are shown. The additional table rows are added and removed as
necessary by the Javascript alarm and event libraries.  
</p>

<p>The headings used in the HTML tables do not matter. However the number and 
order of each column is fixed and cannot be changed without modifying the 
Javascript library code. 
</p>

<p>Each table is given a unique "id" (e.g. id="AlarmDisplay" and 
id="AlarmHistoryDisplay") which is passed to the Javascript library objects
to tell them which tables to use. 
</p>

<p>The majority of the HTML shown above is actually associated with creating
a push button for acknowledging the alarms. In this case an SVG push button 
was added to the page, but an HTML or XUL push button could also have been 
used. The button uses onclick="MBHMIProtocol.AddAlarmAck();" to send an 
ackowledge message to the server. 
</p>

<p>The display is initialised by creating an object for displaying alarms, and 
another object for displaying the alarm history. Each is then added to the
display list.
</p>

<p>The alarm display is initialised with a reference to the alarm display 
table, object literals containing the alarm message texts and the alarm 
states texts, and the colours to be used for highlighing the alarm states.
</p>

<p>The alarm history display is initialised with a reference to the alarm
history display table, the maximum number of alarm history messages to 
display, and the alarm message texts.
</p>

<p>When alarms and alarm history messages are received, the alarm and alarm
history display tables are automatically updated via the display list.
</p>


<hr>

<h2>Events:</h2>
<p>
<img src="mindemoevents.png" width="525" height="259" alt="Events">
</p>

<p>Events are messages representing the occurance of incidents about which the 
operator should be notified, but for which the operator does not normally need
to take any action. Unlike alarms, the operator does not acknowledge events.   
</p>


<p>Events are detected by the HMI server by monitoring a boolean value which 
is defined in the configuration. When that boolean value changes state from 
true to false or from false to true, an event message is generated.
</p>

<p>Each event is associated with a monitored value. The event messages represent 
a sequential record. Each time an event is generated, a copy of the message is 
added to the sequence. This means that the same event may appear multiple times 
in the event display table.
</p>

<p>Event messages are saved by the server in an "event buffer". When the HMI 
client starts up, it requests all outstanding event messages (up to a maximum). 
Subsequent to this, the HMI client will ask only for any new messages that it 
does not already have. This is controlled automatically by the communications 
library.
</p>

<p>When a new event message is received, it is added to the top of the event 
table. The table has a fixed maximum size. When the table reaches this maximum 
size, older messages are discarded. Because the event messages are stored in 
the server, they are not lost when the web browser is restarted or when the 
page is reloaded.
</p>

<p>Event messages include the following information:
</p>

<ul>
	<li>The event number. This is a sequential number generated by the server  
		track the event messages. </li>
	<li>The event time. This is the time as which the event was generated.</li>
	<li>The event text. This is the description of the event.</li>
	<li>State. This is a value indicating the state of the event (0 for off,
		1 for on).</li>
</ul>

<h3>HTML</h3>

<pre class="examples">

	&lt;h2&gt;Events:&lt;/h2&gt;

	&lt;p&gt;
	&lt;!-- This is the table used to display the events. --&gt;
	&lt;table id="EventDisplay" border="5" cellpadding="5"&gt;
	&lt;tr&gt;
		&lt;td&gt;&lt;b&gt;Event #:&lt;/b&gt;&lt;/td&gt; 
		&lt;td&gt;&lt;b&gt;Date:&lt;/b&gt;&lt;/td&gt; 
		&lt;td&gt;&lt;b&gt;Event:&lt;/b&gt;&lt;/td&gt; 
		&lt;td&gt;&lt;b&gt;State:&lt;/b&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;/table&gt;
	&lt;/p&gt;

</pre>


<h3>Javascript:</h3>

<pre class="examples">

	// Event Screen items.

	// This is to display the events.
	var EventDisplay = new MB_EventDisplay(document, "EventDisplay", 
			50, event_text);
	// Add this to the display list.
 	MBHMIProtocol.AddToDisplayList(EventDisplay, "events", "events");

</pre>


<h3>Javascript Library Functions:</h3>

<p>The following Javascript library functions are useful for this feature:
</p>

<ul>
	<li>MB_EventDisplay</li>
</ul>


<h3>Event Message Texts:</h3>

<p>Event messages indentify the particular alarms via "event tags". The actual
texts for the messages is not sent with the message. Instead, the event 
object must be initialised with a data structure associating the event tag 
with the text to be displayed. This data structure is in the
form of a standard Javascript "object literal". The format for this is shown 
below. For example "PumpRunning" is an event tag, and "PBTank pump is running." 
is the actual text that will be displayed. The event tag must match the names 
used in the server configuration file.  
</p>

<pre class="examples">

	event_text = {
	"PumpRunning" : "Tank pump is running.",
	"PumpStopped" : "Tank pump is stopped.",
	"Tank1Empty" : "Tank 1 is empty.",
	"Tank1Full" : "Tank 1 is full.",
	"Tank2Empty" : "Tank 2 is empty.",
	"Tank2Full" : "Tank 2 is full."
	}

</pre>


<h3>How it works:</h3>

<p>The event display is implemented by creating an HTML table and then 
updating its data using Javascript. In the above examples, only the table 
headings are shown. The additional table rows are added and removed as 
necessary by the Javascript alarm and event libraries.
</p>

<p>The headings used in the HTML table do not matter. However the number and 
order of each column is fixed and cannot be changed without modifying the 
Javascript library code.
</p>

<p>The table is given a unique "id" (e.g. id="EventDisplay") which is passed 
to the Javascript library object to tell it which table to use.
</p>

<p>The display is initialised by creating an object for displaying events, which
is then added to the display list. The event display is initialised with a 
reference to the event display table, the maximum number of event messages 
to display, and the event message texts. 
</p>

<p>When event messages are received, the event display table is automatically 
updated via the display list.  
</p>


<hr>

<h2>Errors and Communications Status:</h2>
<p>
<img src="HMI-ErrorDisplay.png" width="526" height="473" alt="Errors">
</p>

<p>Communications errors and communications status shows the result 
of any errors which may have been returned by the server in its response.
The "status" simply shows whether the overall response contains an error.
</p>

<p>The "errors" provides information in cases where the client may have
attempted to perform an action which is not permitted. For example, the client
may have referenced a tag name which does not exist, or may have attempted
to write a value which is out of range for the data type.
</p>

<p>When a new message is received, it is added to the top of the appropriate 
display table. The tables have a fixed maximum size. When the table reaches 
this maximum size, older messages are discarded. The size of these tables is
set by the application (web page) programmer when initialising them.   
</p>

<p>Error and status messages are <em>not</em> saved by the server. They are only
save in the client. When the HMI client is restarted or the web page is reloaded,
any existing error or status messages are lost.
</p>


<h3>HTML</h3>

<pre class="examples">

	&lt;h2&gt;Communications Errors:&lt;/h2&gt;
	&lt;!-- This is the table used to display the communcations errors. --&gt;
	&lt;p&gt;&lt;table id="ErrorDisplay" border="5" cellpadding="5"&gt;
	&lt;tr&gt;
		&lt;td&gt;&lt;b&gt;Date:&lt;/b&gt;&lt;/td&gt; 
		&lt;td&gt;&lt;b&gt;Tag:&lt;/b&gt;&lt;/td&gt; 
		&lt;td&gt;&lt;b&gt;Error:&lt;/b&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;/table&gt;
	&lt;/p&gt;
	
	
	&lt;h2&gt;Communications Status:&lt;/h2&gt;
	&lt;!-- This is the table used to display the coummunications status. --&gt;
	&lt;p&gt;&lt;table id="StatusDisplay" border="5" cellpadding="5"&gt;
	&lt;tr&gt;
		&lt;td&gt;&lt;b&gt;Date:&lt;/b&gt;&lt;/td&gt; 
		&lt;td&gt;&lt;b&gt;Status Code:&lt;/b&gt;&lt;/td&gt; 
		&lt;td&gt;&lt;b&gt;Status:&lt;/b&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;/table&gt;
	&lt;/p&gt;

</pre>


<h3>Javascript:</h3>

<pre class="examples">

	// This is to display the communications errors.
	var ErrorDisplay = new MB_TagErrorDisplay(document, "ErrorDisplay", 50, error_text);
	// Add this to the display list.
	MBHMIProtocol.AddToDisplayList(ErrorDisplay, "errors", "errors");


	// This is to display the communications status log.
	var StatusLogDisplay = new MB_StatusLogDisplay(document, "StatusDisplay", 
			50, status_text);
	// Add this to the display list.
	MBHMIProtocol.AddToDisplayList(StatusLogDisplay, "status", "status");

</pre>


<h3>Javascript Library Functions:</h3>

<p>The following Javascript library functions are useful for this feature:
</p>

<ul>
	<li>MB_TagErrorDisplay</li>
	<li>MB_StatusLogDisplay</li>
</ul>


<h3>How it works:</h3>

<p>The status and error displays are implemented by creating HTML tables and 
then updating them with data using Javascript. In the above examples, only 
the table headings are shown. The additional table rows are added and removed 
as necessary by the Javascript status and error library.
</p>

<p>The headings used in the HTML tables do not matter. However the number and 
order of each column is fixed and cannot be changed without modifying the 
Javascript library code.
</p>

<p>The tables are each given a unique "id" (e.g. id="ErrorDisplay" and 
id="StatusDisplay") which are passed to the Javascript library objects to tell 
them which tables to use.
</p>

<p>The display is initialised by creating an object for displaying status, and 
another object for errors, which are then added to the display list. 
Each display is initialised with a reference to the appropriate display 
table, the maximum number of messages to display, and the message texts.
</p>

<p>When errors or status are detected, the display tables are automatically 
updated via the display list.  
</p>


<hr>

<h2>Alarm and Event Zones:</h2>

<p>Every alarms or events is associated with one or more "zones". This 
associaion is made via the server configuration. When a web client requests
alarms or events, it does so by requesting one or more alarm or event zones. 
Any alarms or events which are not associated with the requested zone(s) are
not sent in the response. This permits a client to only receive alarms or 
events which are relevant to it and to filter out any which are not. 
</p>

<p>Alarm zones are independent from event zones. The same name may be used for
both an alarm zone and an event zone without affecting each other.  
</p>

<p>Which alarm and event zones are requested by the client is set by
the configuration used when initialising the protocol communications library.
A list of alarm zones and a separate list of event zones are passed to the
library upon initialisation. An example of this is shown below. Details of
the other parameters used by HMIClient are not discussed here (see the 
documentation on communications for more details). 
</p>

<h3>Javascript:</h3>

<pre class="examples">

	// Make a list of the alarm and event zones to be monitored. Zones are
	// used to filter alarms and events to only those we are interested in. 
	var AlarmZoneList = ["zone1", "zone2", "zone3"];
	var EventZoneList = ["zone1", "zone2", "zone3"];

	/* This handles communications with the server. The configuration
	parameters are read from a file. The final parameter enables asynchronous
	communications. */

	/* This handles communications with the server. 
	The parameters are: 
		1) The host name the web page was loaded from.
		2) The port number the web page was loaded from. 
		3) The client ID string.
		4) The list of tags to poll for data.
		5) The list of alarm zones to poll for new alarms.
		6) The list of event zones to poll for new events.
		7) true = Enable asynchronous communications.
	The first two parameters use a standard Javascript feature.
	Alternatively, these can be hard coded values if the host
	and port are known in advance.
	*/
	var MBHMIProtocol = new HMIClient(window.location.hostname, 
				window.location.port, "HMI 9876 from Water Pressure INC.", 
				ReadList, AlarmZoneList, EventZoneList, true);

</pre>

<p>In the above example, the alarm and event zones were given the same name. 
However the names are arbitrary and there is no requirement to use the same
zone names or to request the same number of zones. 
</p>

<hr>

<h2>Loading Alarm, Event, and Error Message Texts:</h2>

<p>It is often convenient to load the messages from an external file rather
that incorporating them into the web page itself. Because the messages are 
stored in standard Javscript "object literal" format, they can be loaded as
an external Javascript file. The code for this is shown below. This should
be located at the beginning of the web page where other external resources
are being loaded.
</p>

<pre class="examples">

	&lt;!-- Alarm and event text message definitions. --&gt;
	&lt;script type="text/javascript" src="eventstext.js"&gt;&lt;/script&gt;

</pre>

<p>Because the message texts themselves are not sent as part of the message,
it is possible to support different languages simultaneously. The web page
for that language simply has to import the file with the correct translation. 
</p>

<hr>

</div>


<!-- Standard footer -->
<div id="footer">
	<p>Help - HMI Alarms, Events, and Errors</p>
</div>

</div>

</body>
</html>

<!-- Copyright 2009. Michael Griffin
This file is part of MBLogic.
MBLogic is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
MBLogic is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
You should have received a copy of the GNU General Public License
along with MBLogic. If not, see <http://www.gnu.org/licenses/>.
 -->

