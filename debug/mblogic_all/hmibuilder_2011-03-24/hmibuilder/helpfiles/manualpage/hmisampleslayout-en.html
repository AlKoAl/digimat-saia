<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" 
	"http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >

	<title>Help - HMI - HMI Page Layout</title>
<link rel="icon" type="image/png" href="/systemicon.png">
<!-- General page layout style sheet. -->
<link rel="stylesheet" href="/helppagelayout.css" type="text/css">
</head>

<body>
<div id="filler">

	<div id="header">
		<p class="headlogo">
			<img src="/systemlogo.png" width="200" alt="MB Logic Logo"/>
			<span class="headtitle1">MBLogic </span>
			<span class="headtitle2"> for an open world in automation</span>
		</p>
	</div>



	<!-- This is the standard nav bar. -->
	<div id="nav">
		<ul>
			<li><a href="/index.html">Home</a></li>
			<li><a href="/svgedit/svgedit.html">Edit SVG</a></li>
			<li><a href="/svglib/svglib.html">SVG Library</a></li>
			<li><a href="/svglibedit/svglibedit.html">Inkscape</a></li>
			<li><a href="/hmitemplates/hmitemplates.html">Templates</a></li>
			<li><a href="/hmibuilder/hmibuilder.html">Assemble Page</a></li>
		</ul>
	</div>


<hr>

	<!-- This is the help system nav bar. -->
	<div id="helpnav">
		<h2>Help Topics</h2>
		<ul>
			<li><a href="/index.html">Home</a></li>
			<li><a href="/svgedit/svgedit.html">Editing SVG with Inkscape</a></li>
			<li><a href="/svglib/svglib.html">SVG Library</a></li>
			<li><a href="/svglibedit/svglibedit.html">Using the SVG Library with Inkscape</a></li>
			<li><a href="/customwidgets/customwidgets.html">Custom Widgets</a></li>
			<li><a href="/hmitemplates/hmitemplates.html">HMI web templates</a></li>
			<li><a href="/hmibuilder/hmibuilder.html">Assembling web pages</a></li>
			<li><a href="/hmilib/hmilib.html">HMI Javascript Client Libraries</a></li>
			<li><a href="/basicconcepts/basicconcepts.html">Basic Concepts</a></li>
			<li><a href="/manualpage/manualpage.html">Manual HMI Web Page Construction</a></li>
		</ul>

		<h3>Manual HMI Web Page Construction</h3>
		<ul>
			<li><a href="/manualpage/hmisampleslayout-en.html">Page Layout</a></li>
			<li><a href="/manualpage/hmisamplespositioning-en.html">
				Positioning Components on the Screen</a></li>
			<li><a href="/manualpage/hmisamplescomms-en.html">
				Communications, the Display List and Data Sources</a></li>
			<li><a href="/manualpage/hmisamplesmenus-en.html">Menu Control</a></li>
			<li><a href="/manualpage/hmisamplesalarms-en.html">
				Events, Alarms, and System Status</a></li>
			<li><a href="/manualpage/hmisamplesxul-en.html">
				Mixing HTML and XUL with SVG</a></li>
			<li><a href="/manualpage/hmisamplespushbuttons-en.html">Push Buttons</a></li>
			<li><a href="/manualpage/hmisamplespilotlights-en.html">Pilot Lights</a></li>
			<li><a href="/manualpage/hmisamplesnumerictext-en.html">
				Numeric and Text Displays</a></li>
			<li><a href="/manualpage/hmisamplesgauges-en.html">Tanks and Gauges</a></li>
			<li><a href="/manualpage/hmisamplespipes-en.html">Piping and Pumps</a></li>
			<li><a href="/manualpage/hmisamplesnumbinput-en.html">Numeric Inputs</a></li>
			<li><a href="/manualpage/hmisamplesstripchart-en.html">Strip Charts</a></li>
			<li><a href="/manualpage/hmisamplesbackground-en.html">Background Images</a></li>
		 	<li><a href="/manualpage/hmisamplesvisualeffects-en.html">Visual Effects</a></li>
		</ul>

	</div>



	<!-- Put main content here -->
	<div id="datadisplay">

<h1>Help - HMI Page Layout</h1>

<hr>

<h2>Overview:</h2>

<p>This help topic goes over a simple example which we will call 
"mindemo.xhtml". It explains what each part of the page is for. More complex 
systems can be based on this sample application, with new HTML and SVG added 
as required. 
</p>


<hr>
<h2>Page Design:<a name="Page Design"></a></h2>

<p>This document is not intended as a tutorial on HTML or XHTML. There are
plenty of other more authoritative sources for that. For example, the W3C
organisation has the specifications on line. See the 
<a href="http://www.w3.org/TR/">W3C specs</a> for more details. 
</p>

<p>What this document does do is suggest how to lay out an HMI application
through the use of a basic example with four screens.	
</p>

<p>
<img src="mindemomain.png" width="525" height="405" alt="Basic main screen">
<img src="mindemoevents.png" width="525" height="259" alt="Basic events screen">
<img src="mindemoalarms.png" width="525" height="394" alt="Basic alarms screen">
<img src="mindemohelp.png" width="525" height="189" alt="Basic help screen">
</p>

	<hr>

<h2>Basic Example:<a name="Basic Example"></a></h2>

<p>The following shows a very simple example.</p>

<p><ol>
	<li>Declare the XHTML DTD and and other standard information required to 
	define a web page.
	<pre class="examples">

	&lt;?xml version="1.0" encoding="UTF-8"?&gt;
	&lt;!DOCTYPE html 
	      PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
	
	&lt;html xmlns="http://www.w3.org/1999/xhtml" 
			xmlns:svg="http://www.w3.org/2000/svg"
	    	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" 
	      xmlns:xlink="http://www.w3.org/1999/xlink"&gt;

	</pre>
	</li>

	<li>Import any CSS and Javascript libraries required. This should include the
	HMI communications and display libraries. In this example, we are 
	importing the CSS style sheet, the standard libraries. 
	<pre class="examples">

	&lt;head&gt;
	&lt;link rel="icon" type="image/png" href="demo_icon.png" /&gt;
	
	&lt;!-- Version 20-Oct-2009 --&gt;
	
	&lt;title&gt;HMI Minimal Demo&lt;/title&gt;
	
	&lt;!-- General page layout style sheet. --&gt;
	&lt;link rel="stylesheet" href="mindemopagelayout.css" type="text/css"&gt;&lt;/link&gt;
	
	&lt;!-- Style sheet to control graphic buttons. --&gt;
	&lt;link rel="stylesheet" href="hmibuttons.css" type="text/css"&gt;&lt;/link&gt;
	
	&lt;!-- JSON parser. --&gt;
	&lt;script type="text/javascript" src="json2.js"&gt;&lt;/script&gt;
	&lt;!-- HMI Protocol functions. --&gt;
	&lt;script type="text/javascript" src="libhmiclient2.js"&gt;&lt;/script&gt;
	&lt;!-- MBHMI Library. --&gt;
	&lt;script type="text/javascript" src="libmbhmi.js"&gt;&lt;/script&gt;
	&lt;!-- MBHMI Library for events, alarms, and error display. --&gt;
	&lt;script type="text/javascript" src="libmbevents.js"&gt;&lt;/script&gt;
	
	</pre>
	</li>

	<li>Import any Javascript libraries that are being used to store data. 
	This includes items such as event and alarm texts, lists of text messages, etc.
	In this example, we are importing a file which contains the message texts
	for the events and alarms. We've placed these in a separate file to make
	them more managable, and also to avoid cluttering up the main HTML file.
	This same technique can be used for any text which has to be imported. 
	<pre class="examples">
	
	&lt;!-- Alarm and event text message definitions. --&gt;
	&lt;script type="text/javascript" src="eventstext.js"&gt;&lt;/script&gt;
	&lt;!-- Error text message definitions, including alarm states. --&gt;
	&lt;script type="text/javascript" src="errortexts.js"&gt;&lt;/script&gt;
	
	&lt;/head&gt;

	</pre>
	</li>


	<li>Be sure the "body" includes the name of the function to run "onload". This
	is the function which will run on start up and enable the polling process.
	<pre class="examples">

 	&lt;body onload="pageinit();"&gt;  

	</pre>
	</li>

	<li>We are going to enclose the entire page inside a "div" to help format it
		We have to remember to close this tag at the end.
	<pre class="examples">

	&lt;div id="filler"&gt;
	</pre>
	</li>

	<li>Make sure your navigation menu includes some means of selecting which 
	"screens" should get displayed. The HMI library has a function intended to 
	assist with this. In this example, we are using an HMI library function
	to select between the "main", "events", and "alarms" screens. These operate
	by changing the styles associated with each.
	<pre class="examples">

	&lt;!-- This is the standard nav bar. --&gt;
	&lt;div id="nav"&gt;
		&lt;ul&gt;
		&lt;li&gt;&lt;a onclick = "ScreenSelect.SelectScreen('mainscreen')"&gt;Main&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a onclick = "ScreenSelect.SelectScreen('eventscreen')"&gt;Events&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a onclick = "ScreenSelect.SelectScreen('alarmscreen')"&gt;Alarms&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a onclick = "ScreenSelect.SelectScreen('helpscreen')"&gt;Help&lt;/a&gt;&lt;/li&gt;
		&lt;/ul&gt;
	&lt;/div&gt;

	</pre>
	</li>

	<li>Create your display SVG and XHTML. This will be the part of your 
	application where you determine what your application actually looks 
	like. This example creates an SVG screen with two pilot lights, two
	push buttons, and a numeric display. It then creates the tables for
	the events and the alarms. Much of what we see below is for the push
	buttons because of the large number of artistic effects added to each.
	This is mainly just copy/paste though, so there isn't really as much to
	it as it may appear at first sight. First, we start with the main screen.
	The screen starts with a "div" tag that contains an "id" that is associated
	with the screen control menu.

	<pre class="examples">

		&lt;!-- ################################################################## --&gt;
	
	&lt;!-- This acts as a container for the main screen content. --&gt;
	&lt;div id="screencontent"&gt;
	
		&lt;!-- Put main content here --&gt;
		&lt;div id="mainscreen"&gt;
	
		&lt;h1&gt;Main Screen&lt;/h1&gt;
	
		&lt;hr&gt;&lt;/hr&gt;
	
		&lt;svg xmlns="http://www.w3.org/2000/svg" 
			version="1.1" baseProfile="full" width="1000px" height="525px"
			xmlns:html="http://www.w3.org/1999/xhtml" 
			xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"&gt;
	
	
		&lt;!-- ################################################################### --&gt;
		&lt;!-- This section contains the standard re-usable graphics definitions. --&gt;
	
		&lt;!-- These are some definitions which are used below. --&gt;
		&lt;defs&gt;
			&lt;!-- These apply a linear colour gradient across the buttons. 
				More colours can be added as needed. They only apply to the
				current "screen", and so have to be repeated if we need them 
				elsewhere. --&gt;
			&lt;!-- Red gradients. --&gt;
			&lt;linearGradient id="MB_RedGradient" 
					x1="1" y1="1" x2="0" y2="0"&gt;
				&lt;stop offset="50%" stop-color="red" /&gt;
				&lt;stop offset="100%" stop-color="white" /&gt;
			&lt;/linearGradient&gt;
	
			&lt;!-- Grey Gradients. --&gt;
			&lt;linearGradient id="MB_GreyGradient" 
					x1="1" y1="1" x2="0" y2="0"&gt;
				&lt;stop offset="50%" stop-color="grey" /&gt;
				&lt;stop offset="100%" stop-color="white" /&gt;
			&lt;/linearGradient&gt;
	
			&lt;!-- Black Gradients. --&gt;
			&lt;linearGradient id="MB_BlackGradient" 
					x1="1" y1="1" x2="0" y2="0"&gt;
				&lt;stop offset="50%" stop-color="black" /&gt;
				&lt;stop offset="100%" stop-color="white" /&gt;
			&lt;/linearGradient&gt;
	
			&lt;linearGradient id="MB_SilverGradient" 
					x1="1" y1="1" x2="0" y2="0"&gt;
				&lt;stop offset="50%" stop-color="silver" /&gt;
				&lt;stop offset="100%" stop-color="white" /&gt;
			&lt;/linearGradient&gt;
	
			&lt;!-- The following filter is used to add a drop shadown. --&gt;
			&lt;filter id="MB_DropShadowFilter"&gt;
				&lt;feGaussianBlur stdDeviation="2"&gt;
				&lt;/feGaussianBlur&gt;
			&lt;/filter&gt;
	
		&lt;/defs&gt;
	
		&lt;!-- Push buttons. --&gt;
		&lt;defs&gt;
	
			&lt;!-- Square push button. 80 x 80 px. --&gt;
			&lt;g id="MB_SquarePB"&gt;
				&lt;!-- This rectangle is used for the drop shadown and needs to match 
					the size used for the button. --&gt;
				&lt;rect x="-33" y="-33" width="80" height="80" rx="15"
					fill="grey" stroke="none" stroke-width="0px" 
					filter="url(#MB_DropShadowFilter)"/&gt;
		
				&lt;!-- This is the actual button.  --&gt;
				&lt;rect x="-40" y="-40" width="80" height="80" rx="15"/&gt;
			&lt;/g&gt;
	
			&lt;!-- Rectangular push button.  140 x 50 px --&gt;
			&lt;g id="MB_RectangularPB"&gt;
					&lt;!-- This rectangle is used for the drop shadown. --&gt;
					&lt;rect x="-63" y="-18" width="140" height="50" rx="15"
						fill="grey" stroke="none" stroke-width="0px" 
						filter="url(#MB_DropShadowFilter)"/&gt;
			
					&lt;!-- This is the actual button. --&gt;
					&lt;rect x="-70" y="-25" width="140" height="50" rx="15"/&gt;
			&lt;/g&gt;
	
	
		&lt;/defs&gt;
	
		&lt;!-- Pilot lights. --&gt;
		&lt;defs&gt;
			&lt;!-- This is a decorative octagonal nut. --&gt;
			&lt;g id="MB_NUT"&gt;
				&lt;polygon transform="translate(5,5)" fill="grey" stroke="none"
					filter="url(#MB_DropShadowFilter)"
					points="18,-45 -18,-45 -45,-18 -45,18 -18,45 18,45 
								45,18 45,-18 18,-45" /&gt;
				&lt;polygon  fill="url(#MB_SilverGradient)" stroke="none"
					points="18,-45 -18,-45 -45,-18 -45,18 -18,45 18,45 
								45,18 45,-18 18,-45" /&gt;
			&lt;/g&gt;
	
			&lt;!-- Circular pilot light. r = 35 px--&gt;
			&lt;g id="MB_PilotLightRound"&gt;
				&lt;!-- This is a decorative nut. --&gt;
				&lt;use xlink:href="#MB_NUT"/&gt;
				&lt;!-- This is the part which changes colour. --&gt;
				&lt;circle cx="0px" cy="0px" r="35px" stroke="black" stroke-width="5px"/&gt;
			&lt;/g&gt;
	
			&lt;!-- Rectangular pilot light with rounded corners. 60 x 60 px --&gt;
			&lt;g id="MB_PilotLightSquare"&gt;
				&lt;!-- This is a decorative nut. --&gt;
				&lt;use xlink:href="#MB_NUT"/&gt;
				&lt;!-- This is the part which changes colour. --&gt;
				&lt;rect x="-30" y="-30" width="60" height="60" rx="15"
					stroke="black" stroke-width="5px" /&gt;
			&lt;/g&gt;
	
	
		&lt;/defs&gt;
	
	
	&lt;defs&gt;
	
		&lt;!-- This is a decorative gradient for the display. --&gt;
		&lt;linearGradient id="MB_DigitBezelGradient" 
				x1="1" y1="1" x2="0" y2="0"&gt;
			&lt;stop offset="0%" stop-color="black" /&gt;
			&lt;stop offset="100%" stop-color="whitesmoke" /&gt;
		&lt;/linearGradient&gt;
	
		&lt;!-- This is a decorative box for display numbers and text. 
			This is sized appropriately to hold 4 numeric digits of 24 point font. --&gt;
		&lt;!-- This is a decorative box for display numbers and text. 
			This is sized appropriately to hold 4 numeric digits of 24 point font. --&gt;
		&lt;g id="MB_DigitBezel"&gt;
	
			&lt;!-- This provides the drop shadow. --&gt;
			&lt;rect x="-38" y="-18" width="80" height="40" rx="2" 
				fill="grey" filter="url(#MB_DropShadowFilter)" stroke="none"/&gt;
	
			&lt;!-- This provides the outer ring. --&gt;
			&lt;rect x="-40" y="-20" width="80" height="40" rx="2" 
					fill="url(#MB_DigitBezelGradient)" stroke="none"/&gt;
	
			&lt;!-- This provides the middle ring. --&gt;
			&lt;rect x="-38" y="-18" width="76" height="36" rx="2"
					fill="url(#MB_DigitBezelGradient)" stroke="black"/&gt;
	
			&lt;!-- This provides the inner background. --&gt;
			&lt;rect x="-35" y="-15" width="70" height="30" rx="2" /&gt;
		&lt;/g&gt;
	
		&lt;!-- This is a decorative box for display numbers and text. 
			This is twice the width of MB_DigitBezel. --&gt;
		&lt;g id="MB_DigitBezel2"&gt;
	
			&lt;!-- This provides the drop shadow. --&gt;
			&lt;rect x="-73" y="-18" width="150" height="40" rx="2" 
				fill="grey" filter="url(#MB_DropShadowFilter)" stroke="none"/&gt;
	
			&lt;!-- This provides the outer ring. --&gt;
			&lt;rect x="-75" y="-20" width="150" height="40" rx="2" 
					fill="url(#MB_DigitBezelGradient)" stroke="none"/&gt;
	
			&lt;!-- This provides the middle ring. --&gt;
			&lt;rect x="-73" y="-18" width="146" height="36" rx="2"
					fill="url(#MB_DigitBezelGradient)" stroke="black"/&gt;
	
			&lt;!-- This provides the inner background. --&gt;
			&lt;rect x="-70" y="-15" width="140" height="30" rx="2" /&gt;
		&lt;/g&gt;
	
	
	&lt;/defs&gt;
	
	
	&lt;!-- %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% --&gt;
	
		&lt;!-- This adds an image to the background. --&gt;
	 	&lt;image xlink:href="processdrawing.png"  width="1000" height="525"/&gt;
	
	
		&lt;!-- This displays the server message ID. --&gt;
		&lt;g transform="translate(240, 50)"&gt;
			&lt;text x="-110" y="-5" font-size="16"&gt;Server&lt;/text&gt; 
			&lt;text x="-110" y="10" font-size="16"&gt;Mesg ID&lt;/text&gt;
			&lt;g fill="black"&gt;
				&lt;use xlink:href="#MB_DigitBezel"/&gt;
			&lt;/g&gt;
			&lt;text id="MsgIDText" x="30" y="8" 
				stroke="red" fill="red" font-size="20" 
				text-anchor="end"&gt;msgid:&lt;/text&gt;
		&lt;/g&gt;
	
			&lt;!-- This displays the server ID. --&gt;
		&lt;g transform="translate(600,50)"&gt;
			&lt;text x="-225" y="-5" font-size="16"&gt;Server&lt;/text&gt; 
			&lt;text x="-225" y="10" font-size="16"&gt;ID&lt;/text&gt;
			&lt;g transform="scale(2,1)" fill="indigo"&gt;
				&lt;use xlink:href="#MB_DigitBezel2"/&gt;
			&lt;/g&gt;
			&lt;text id="ServerIDText" x="-120" y="8" 
				stroke="orange" fill="orange" font-size="20"&gt;serverid:&lt;/text&gt;
		&lt;/g&gt;
	
	
	
		&lt;!-- We group a pilot light and push button so we
			can move them around together . --&gt;
		&lt;g transform="translate(285,220)"&gt;
			&lt;!-- The first pilot light is a circle. --&gt;
			&lt;g id="PL1"&gt;
				&lt;use xlink:href="#MB_PilotLightRound" /&gt;
			&lt;/g&gt;
	
	
			&lt;!-- This first button illustrates a momentary push button. --&gt;
			&lt;g transform="translate(0,100)" fill="url(#MB_GreyGradient)"
				class="buttonactivate"
				onmousedown="MBHMIProtocol.WriteImmediate('PB1', 1);" 
				onmouseup="MBHMIProtocol.WriteImmediate('PB1', 0);" 
				onmouseout="MBHMIProtocol.WriteImmediate('PB1', 0);"&gt;
	
	 			&lt;!-- This is the actual button. --&gt;
				&lt;use xlink:href="#MB_SquarePB" /&gt;
	 			&lt;!-- This is the text label. --&gt;
				&lt;text x="0" y="8" font-size="24" stroke-width="2px" 
						text-anchor="middle"&gt;PB1&lt;/text&gt; 
			&lt;/g&gt;
	
		&lt;/g&gt;
	
	
		&lt;!-- We group a pilot light and push button so we
			can move them around together . --&gt;
		&lt;g transform="translate(575,220)"&gt;
			&lt;!-- This shows a rectangular pilot light with rounded corners. --&gt;
			&lt;g id="PL2"&gt;
				&lt;use xlink:href="#MB_PilotLightSquare" /&gt;
			&lt;/g&gt;
		
			&lt;!-- This shows a maintained push button. --&gt;
			&lt;g transform="translate(0,100)" fill="url(#MB_RedGradient)"
				class="buttonactivate"
				onmousedown="MBHMIProtocol.WriteToggleImmediate('PB2', 'PL2');"&gt;
			
	 			&lt;!-- This is the actual button. --&gt;
				&lt;use xlink:href="#MB_RectangularPB" /&gt;
	 			&lt;!-- This is the text label. --&gt;
				&lt;text x="0" y="8" font-size="24" stroke-width="2px" 
						text-anchor="middle"&gt;PB2&lt;/text&gt; 
	
			&lt;/g&gt;
		&lt;/g&gt;
	
	
	    &lt;/svg&gt;
	&lt;/div&gt;
	
		&lt;!-- End of the main page. --&gt;
	
	
	</pre>
	</li>
	
	<li>Create the next screen. This follows immediately after the previous one.
		Be sure to close off the previous screen with a closing "div" tag, and
		start the new one with an opening "div" tag and an "id" which can be
		controlled by the screen display menu.
	<pre class="examples">


	&lt;div id="eventscreen"&gt;
		&lt;h2&gt;Events:&lt;/h2&gt;

		&lt;p&gt;
		&lt;!-- This is the table used to display the events. --&gt;
		&lt;table id="EventDisplay" border="5" cellpadding="5"&gt;
		&lt;tr&gt;
			&lt;td&gt;&lt;b&gt;Event #:&lt;/b&gt;&lt;/td&gt; 
			&lt;td&gt;&lt;b&gt;Date:&lt;/b&gt;&lt;/td&gt; 
			&lt;td&gt;&lt;b&gt;Event:&lt;/b&gt;&lt;/td&gt; 
			&lt;td&gt;&lt;b&gt;State:&lt;/b&gt;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;/table&gt;
		&lt;/p&gt;
	&lt;/div&gt;


	&lt;!-- End of the events page. --&gt;

	
	</pre>
	</li>
	
	<li>Now, create the third screen the same way. Don't forget the opening
	and closing "div" tags. 

	<pre class="examples">
	

	&lt;div id="alarmscreen"&gt;
	
		&lt;h2&gt;Active Alarms:&lt;/h2&gt; 
	
		&lt;p&gt;  
		&lt;svg xmlns="http://www.w3.org/2000/svg" 
	 	    xmlns:html="http://www.w3.org/1999/xhtml" width="250px" height="75"&gt;
	
	
		&lt;defs&gt;
			&lt;!-- The following filter is used to add a drop shadown. --&gt;
			&lt;filter id="AlarmDropShadowFilter"&gt;
				&lt;feGaussianBlur stdDeviation="2"&gt;
				&lt;/feGaussianBlur&gt;
			&lt;/filter&gt;
	
				&lt;!-- For violet buttons. --&gt;
			&lt;linearGradient id="AlarmGradient" x1="1" y1="1" x2="0" y2="0"&gt;
				&lt;stop offset="50%" stop-color="violet" /&gt;
				&lt;stop offset="100%" stop-color="white" /&gt;
			&lt;/linearGradient&gt;
	
			&lt;!-- Rectangular push button. --&gt;
			&lt;g id="MB_AlarmPB"&gt;
					&lt;!-- This rectangle is used for the drop shadown. --&gt;
					&lt;rect x="-73" y="-18" width="160" height="50" rx="15"
						fill="grey" stroke="none" stroke-width="0px" 
						filter="url(#AlarmDropShadowFilter)"/&gt;
			
					&lt;!-- This is the actual button. --&gt;
					&lt;rect x="-80" y="-25" width="160" height="50" rx="15"/&gt;
			&lt;/g&gt;
	
		&lt;/defs&gt;
	
	
				&lt;!-- Push button to acknowledge alarms. --&gt;
		&lt;g transform="translate(100, 35)" fill="url(#AlarmGradient)"
				class="buttonactivate" onclick="MBHMIProtocol.AddAlarmAck();"&gt;
	
	 			&lt;!-- This is the actual button. --&gt;
				&lt;use xlink:href="#MB_AlarmPB" /&gt;
	 			&lt;!-- This is the text label. --&gt;
				&lt;text x="-65" y="8" font-size="20" stroke-width="2px"&gt;Acknowledge&lt;/text&gt; 
	
		&lt;/g&gt;
			
	
		&lt;/svg&gt;
		&lt;/p&gt; 
	
		&lt;p&gt;
		 	&lt;!-- This is the table used to display the alarms. --&gt;
			&lt;table id="AlarmDisplay" border="5" cellpadding="5"&gt;
			&lt;tr&gt; 
				&lt;td&gt;&lt;b&gt;Alarm:&lt;/b&gt;&lt;/td&gt;
				&lt;td&gt;&lt;b&gt;Alarm State:&lt;/b&gt;&lt;/td&gt;
				&lt;td&gt;&lt;b&gt;Time:&lt;/b&gt;&lt;/td&gt; 
				&lt;td&gt;&lt;b&gt;Time OK:&lt;/b&gt;&lt;/td&gt; 
				&lt;td&gt;&lt;b&gt;Count:&lt;/b&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;/table&gt;
		&lt;/p&gt;
	
	
		&lt;h2&gt;Alarm History:&lt;/h2&gt;
	
		&lt;!-- This is the table used to display the alarm history. --&gt;
		&lt;p&gt;
			&lt;table id="AlarmHistoryDisplay" border="5" cellpadding="5"&gt;
			&lt;tr&gt;
				&lt;td&gt;&lt;b&gt;Alarm:&lt;/b&gt;&lt;/td&gt;
				&lt;td&gt;&lt;b&gt;Alarm Time:&lt;/b&gt;&lt;/td&gt; 
				&lt;td&gt;&lt;b&gt;Time OK:&lt;/b&gt;&lt;/td&gt; 
				&lt;td&gt;&lt;b&gt;Ack By:&lt;/b&gt;&lt;/td&gt; 
			&lt;/tr&gt;
			&lt;/table&gt;
		&lt;/p&gt;
	
	&lt;/div&gt;

	&lt;!-- End of the alarms page. --&gt;

	</pre>
	</li>

	<li>Finally, include the last (help) screen.
	<pre class="examples">


	&lt;div id="helpscreen"&gt;

		&lt;h1&gt;Help:&lt;/h1&gt;


	&lt;hr&gt;&lt;/hr&gt;

	&lt;p&gt;This web page provides a minimal web based HMI demonstration. This page
	is used as an example in the system documentation.
	&lt;/p&gt;

	&lt;hr&gt;&lt;/hr&gt;


	&lt;/div&gt;

	&lt;!-- End of the help page. --&gt;

	</pre>
	</li>

	<li>Now we can close off the body of the page, including adding any HTML
	that we want to have appear at the foot of the page.
	<pre class="examples">
	
	&lt;!-- End of the screen container. --&gt;
	&lt;/div&gt;
	
	&lt;!-- Standard footer --&gt;
	&lt;div id="footer"&gt;
		&lt;p&gt;Minimal Demo&lt;/p&gt;
	&lt;/div&gt;
	
	&lt;/div&gt;
	
	
	&lt;/body&gt;

	</pre></li>

	<li>Add the initialisation Javascript for each screen element. If you are 
	using the HMI display library, this will largely consist of creating 
	display objects and adding them to the display list. The "HMIClient" object
	("var MBHMIProtocol = new HMIClient") handles setting up communications with
	the server. The final parameter determines whether the communications are
	"synchronous" (false) or "asynchronous" (true). See the client communications 
	library documentation for when to use synchronous or asynchronous communications.

	<pre class="examples">

	&lt;script&gt;
	&lt;![CDATA[
	
	var svgDocument;
	
	var xmlns="http://www.w3.org/2000/svg";

	// Make a list of all the screens that can be selected.
	var ScreenTable = ["mainscreen", "eventscreen", "alarmscreen",	"helpscreen"];
	// This creates an object that controls display of the screens.
	var ScreenSelect = new MB_ScreenSelect(document, ScreenTable);


	// Make a list of all the address tags to be monitored. This is what we
	// send to the server asking for values.
	var ReadList = ["PL1", "PL2"];

	// Make a list of the alarm and event zones to be monitored. Zones are
	// used to filter alarms and events to only those we are interested in. 
	var AlarmZoneList = ["zone1", "zone2", "zone3"];
	var EventZoneList = ["zone1", "zone2", "zone3"];

	/* This handles communications with the server. The configuration
	parameters are read from a file. The final parameter enables asynchronous
	communications. */

	/* This handles communications with the server. 
	The parameters are: 
		1) The host name the web page was loaded from.
		2) The port number the web page was loaded from. 
		3) The client ID string.
		4) The list of tags to poll for data.
		5) The list of alarm zones to poll for new alarms.
		6) The list of event zones to poll for new events.
		7) true = Enable asynchronous communications.
	The first two parameters use a standard Javascript feature.
	Alternatively, these can be hard coded values if the host
	and port are known in advance.
	*/
	var MBHMIProtocol = new HMIClient(window.location.hostname, 
				window.location.port, "HMI Min Demo.", 
				ReadList, AlarmZoneList, EventZoneList, true);


	// This defines a pilot light control.
	var PL1 = new MB_PilotLight(document, "PL1", "black", "green", "red");
	var PL2 = new MB_PilotLight(document, "PL2", "black", "green", "red");

	// Now, add each of these screen objects to the list of things to update.
	MBHMIProtocol.AddToDisplayList(PL1, "PL1", "read");
	MBHMIProtocol.AddToDisplayList(PL2, "PL2", "read");


	// This is for the message ID display.
	var MessageID = new MB_NumericDisplay(document, "MsgIDText");
	MBHMIProtocol.AddToDisplayList(MessageID, "msgid", "msgid");

	// This is for the server ID display (name of the server).
	var ServerID = new MB_StringDisplay(document, "ServerIDText");
	MBHMIProtocol.AddToDisplayList(ServerID, "serverid", "serverid");


	// Event Screen items.

	// This is to display the events.
	var EventDisplay = new MB_EventDisplay(document, "EventDisplay", 
			50, event_text);
	// Add this to the display list.
 	MBHMIProtocol.AddToDisplayList(EventDisplay, "events", "events");


	// This is to display the alarms.
	var AlarmDisplay = new MB_AlarmDisplay(document, "AlarmDisplay", 
		alarm_text, alarmstates_text, "red", "orange", "green");
	// Add this to the display list.
	MBHMIProtocol.AddToDisplayList(AlarmDisplay, "alarms", "alarms");


	// This is to display the alarm history.
	var AlarmHistoryDisplay = new MB_AlarmHistoryDisplay(document, 
		"AlarmHistoryDisplay", 50, alarm_text);
	// Add this to the display list.
	MBHMIProtocol.AddToDisplayList(AlarmHistoryDisplay, "alarmhistory", "alarmhistory");


	</pre>
	</li>

	<li>Create a Javascript function which gets called on a regular basis, 
	and include calls to the protocol library and display update library.
	Note that the "init()" function shown here is the same one that was
	listed above for "onload". In this example, "init" does nothing except
	call RunScanCycle. However, it could be used to start any other functions
	which must run once after the page is loaded. "RunScanCycle" is then
	run at a regular interval, communicating with the server and updating
	the screen. The "SendRequest" function takes care of all server 
	communications and updating of the display list.
	<pre class="examples">

	// Run all the operations required each scan cycle.
	function RunScanCycle() {

		// Query the server for updates.
		MBHMIProtocol.SendRequest();


		// Call the function back again at the set interval.
		// The time interval should be set to a larger value.
		// on very slow computers.
		window.setTimeout("RunScanCycle()", 1500);
		
	}

	// Start up and initialisation.
	function pageinit() {

		// Call the function back again at the set interval.
		window.setTimeout("RunScanCycle()",500);
	}

	//]]&gt;
	&lt;/script&gt;

	</pre>
	</li>

	<li>Finally, you need to close off the "html" to end the page.

	<pre class="examples">

	&lt;/html&gt;

	</pre>
	</li>

	</ol>


<p>The page is complete. Larger applications simply consist of more of the same
type of elements as shown above.
</p>


<hr>


</div>


<!-- Standard footer -->
<div id="footer">
	<p>Help - HMI Page Layout</p>
</div>

</div>

</body>
</html>

<!-- Copyright 2009. Michael Griffin
This file is part of MBLogic.
MBLogic is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
MBLogic is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
You should have received a copy of the GNU General Public License
along with MBLogic. If not, see <http://www.gnu.org/licenses/>.
 -->

